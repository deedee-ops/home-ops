---
# yaml-language-server: $schema=https://www.schemastore.org/traefik-v3.json
http:
  routers:
    dashboard:
      rule: 'Host(`traefik.{{ env "ROOT_DOMAIN" }}`)'
      service: api@internal
      entryPoints:
        - https
      tls:
        certResolver: letsencrypt-ecdsa
        domains:
          - main: '{{ env "ROOT_DOMAIN" }}'
            sans:
              - '*.{{ env "ROOT_DOMAIN" }}'
    metrics:
      rule: 'Host(`traefik.{{ env "ROOT_DOMAIN" }}`) && PathPrefix(`/metrics`)'
      service: prometheus@internal
      entryPoints:
        - https
      tls:
        certResolver: letsencrypt-ecdsa
        domains:
          - main: '{{ env "ROOT_DOMAIN" }}'
            sans:
              - '*.{{ env "ROOT_DOMAIN" }}'

---
# yaml-language-server: $schema=https://json.schemastore.org/traefik-v3.json
http:
  routers:
    truenas:
      rule: 'Host(`nas.{{ env "ROOT_DOMAIN" }}`)'
      entryPoints:
        - https
      service: truenas
      tls:
        certResolver: vault-ecdsa

  services:
    truenas:
      loadBalancer:
        servers:
          - url: "https://host.docker.internal:444"
        passHostHeader: true
        serversTransport: insecureSkipVerifyTransport

  serversTransports:
    insecureSkipVerifyTransport:
      insecureSkipVerify: true

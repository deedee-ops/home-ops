---
customization:
  extraKernelArgs:
    - i915.enable_guc=3                   # Alder Lake CPU / iGPU, hw transcoding
    - intel_iommu=on                      # PCI Passthrough, hw transcoding
    - iommu=pt                            # PCI Passthrough, hw transcoding
    - net.ifnames=0                       # Classic ethernet names
    - sysctl.kernel.kexec_load_disabled=1 # kexec makes SecureBoot pointless
    - talos.auditd.disabled=1             # Too much noise

    # in secureboot, talos locks down to "confidentiality" mode by default, which may break cilium
    # more info: https://github.com/siderolabs/talos/pull/8535
    - -lockdown
    - lockdown=integrity

    # trade security for performance and power saving
    - -init_on_alloc
    - -init_on_free
    - -selinux
    - apparmor=0
    - init_on_alloc=0
    - init_on_free=0
    - mitigations=off
    - security=none
  systemExtensions:
    officialExtensions:
      - siderolabs/i915        # Intel iGPU
      - siderolabs/intel-ucode # Intel iGPU
      - siderolabs/mei         # Intel iGPU
      - siderolabs/thunderbolt # Thunderbolt NICs
      - siderolabs/nfsrahead   # NFS Performance

# vim:ft=yaml

---
# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: "3"

vars:
  clusterJobScript: "{{.ROOT_DIR}}/.taskfiles/Healthcheck/cluster-job.sh"
  repoJobScript: "{{.ROOT_DIR}}/.taskfiles/Healthcheck/repo-job.sh"

tasks:
  cluster:
    desc: Check cluster health
    silent: true
    cmds:
      - bash {{.clusterJobScript}}
    preconditions:
      - sh: test -f {{.clusterJobScript}}

  repo:
    desc: Check repository health
    silent: true
    cmds:
      - bash {{.repoJobScript}}
    preconditions:
      - sh: test -f {{.repoJobScript}}

---
# yamllint disable rule:line-length
# yaml-language-server: $schema=https://raw.githubusercontent.com/yannh/kubernetes-json-schema/master/master-standalone/configmap-v1.json
# yamllint enable rule:line-length
apiVersion: v1
kind: ConfigMap
metadata:
  name: vault-authelia
  labels:
    authelia.com/enabled: "true"
data:
  argocd.yaml: |
    access_control:
      rules:
        - policy: two_factor
          domain:
            - 'vault.<path:kubernetes/data/internal/base#ROOT_DOMAIN>'
          subject:
            - ['user:admin']
        - policy: deny
          domain:
            - 'vault.<path:kubernetes/data/internal/base#ROOT_DOMAIN>'

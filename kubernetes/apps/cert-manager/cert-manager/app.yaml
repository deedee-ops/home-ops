---
# yaml-language-server: $schema=../../../../schemas/argocd.json
namespace: cert-manager
name: cert-manager
repoURL: oci://quay.io/jetstack/charts/cert-manager
version: v1.19.1
psp: restricted

values:
  crds:
    enabled: true
  dns01RecursiveNameservers: https://1.1.1.1:443/dns-query,https://1.0.0.1:443/dns-query
  dns01RecursiveNameserversOnly: true
  prometheus:
    enabled: true
    servicemonitor:
      enabled: true
  podDnsConfig:
    # ensure FQDNs are not expanded with search domains, so cilium can apply policies correctly
    options:
      - name: "ndots"
        value: "1"
  containerSecurityContext: &csc
    readOnlyRootFilesystem: true
  resources: &resources
    requests:
      cpu: "50m"
      memory: "32Mi"
    limits:
      memory: "512Mi"
  webhook:
    containerSecurityContext: *csc
    replicaCount: 2
    resources: *resources
    podDisruptionBudget:
      enabled: true
  cainjector:
    containerSecurityContext: *csc
    resources: *resources
  startupapicheck:
    containerSecurityContext: *csc
    resources: *resources
